<ion-header>
  <ion-toolbar>
    <ion-buttons slot="start">
      <ion-back-button defaultHref="/menu"></ion-back-button>
    </ion-buttons>
    <ion-title>Seu perfil</ion-title>
    <ion-buttons slot="primary">
      <ion-button [routerLink]="'./settings'">
        <ion-icon slot="icon-only" name="settings-outline"></ion-icon
      ></ion-button>
    </ion-buttons>
  </ion-toolbar>
</ion-header>

<ion-content>
  <ion-card *ngIf="user$ | async as user">
    <div class="ion-text-center ion-padding-horizontal ion-padding-top">
      <ion-avatar class="margin-horizontal-auto">
        <img [src]="user.photoURL" />
      </ion-avatar>
      <ion-card-title>
        <h2 class="margin-horizontal-auto">{{ user.displayName }}</h2>
        <p class="margin-horizontal-auto" style="font-size: 20px">{{ user.email }}</p>
        <ng-container *ngIf="academicID$ | async as academicID; else notAStudent">
          <p class="ion-text-wrap" style="margin-bottom: 0">{{ courses.getCourse(academicID) }}</p>
        </ng-container>
        <ng-template #notAStudent>
          <ng-container *ngIf="isProfessor$ | async as isProfessor">
            <p class="ion-text-wrap" style="margin-bottom: 0" *ngIf="isProfessor">Professor</p>
            <p class="ion-text-wrap" style="margin-bottom: 0" *ngIf="!isProfessor">Usuário da comunidade</p>
          </ng-container>
        </ng-template>
      </ion-card-title>
    </div>

    <qr-code
      class="qr-code ion-text-center"
      [value]="'uid:' + (user.uid)"
      size="320"
      errorCorrectionLevel="H"></qr-code>

    <div class="ion-text-center ion-padding" *ngIf="serviceWorkerActive">
      <ion-icon name="information-circle-outline" class="info-icon"></ion-icon>
      <span class="info-text">Esta página está disponível off-line</span>
    </div>
  </ion-card>
</ion-content>
